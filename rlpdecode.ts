import { rlp } from 'ethereumjs-util';
import wasm from '../rust-verkle-wasm/pkg/rust_verkle_wasm'

const block1 = "f908b5f908b0a0e7068a7284845d70c5631c6bbbbd2843f5648c2a46843cd5d8a5440287102bffa01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794a8ea391eacd86ab326843579060e42007a5fa93ba012de1859fbd30a0b4ca9e583525334428fc1451fe938b16e8ee0cae67fc7935ba056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b90100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008302004002833007cf808461af76c88d64616f2d686172642d666f726ba0105fceec00e4d18d5f40bc06884fd46c2af252e232b8c44b98934ec6dc47169f885b383f5860e019bd842da282a8b906a4f906a1f90538f904e9f9025ff84ae4881a8e352cbd5652718860842b474d3b484f888f9e35936e759622884b6836444a18805de4880f92e939453e8b0f883d8cfa1a04a06c368875782a821d5105e688706e08246201a36ef84ae488bf58073f9439102088115cb5ee677eee35881805d647aff944168843e056ee5c712720e4889408d40d621e705a88f98a2fd5e5ec18a48859b75032984c4e248845c2a6f5bd7e4551f849e488b08db29b804ed8b088ec435924120eb5ad8851f0e36d007d95e988573c8d7957ba7e7ae3887b4ae753de421b03885f38752bc4ad9818880b428d3e0619f997873be9994309f0adf84ae4885f0380625ad9619b8869fd3ae6720c36eb88ba3e0cbb6b2538588873330a32fe0da180e488d567cb44d6e193d688547784de78b11ad5888c407a50fe10534088605780c37111ba05f84ae48826bbd5028b415719882b53edef45eeca4d88dee4a8005c1371698834c0db016775192ce488b6aa3b991da78f6088dc08005370740dd488f6f7b7398d7d29c588534ebf8424ac853af84ae488b37fa24f143b10aa8897072a38b674b33b88ece6340a1f8f55bf881409fe54ffc631f3e4888cb447b715a9b6ea88ae8dd05e5fd6e6a18857f91d05bbf9c92b88134040f0af49f13df84ae4886a6944532a670d3a88ebfe277ad61178fe88f869ce43e97008bf881be25c7effa21373e4882a61cc1fee367fb588e7ab0c90787f240288231a55861be0f8ec8814e20d01344209e9f84ae488f52f428f2b9ef48788d00f14766427320e8876091a43c844b5a9886ee1a168400d0d55e4883e55e0c7230bebbe88a5fbb5c66f7dc00d8816ef2c5fbc09018f8837405f6835ee71c1f9025ff84ae488de94c0f7ee6b890888e2436b744314508388d90208c32d276bdc885b6038dff06b1363e4888dff40cdd08e937a88ace272c170915f038853ea49a06cbe99a38830fea8af1b6ba717f84ae4881c3173fd212a874e88af2737bebdef43be8818402e259597c88f887269830ca63e9face488616ca3f27febc6a08849a6cb07d42ec05d8864383766639ba13588368cd6cec012c9a3f849e488d55b23bd153d853188ac7332398c54ac0a8869a9e926b2b0bc728858657b87a27c08d3e388992356b55115adb888526d5428f243d04288180db96098b319268766be67e0f5cf9cf84ae488131aeb22a2805240882844d82da5d4e75f8877e7116ea491d1ad884ce44f59730b88a0e488bcb180eb14de460d88d8df092531acbfd088d90a7267b836674088380344dc4b611916f84ae4884d5d1c04cb43bcd488ec88dcccb08b2daa88fc2fae5e217de1078815f2b634f5b36471e48874cdbf6d075fb02188e32ca026802e91738836c02937cabfbded886964ebdab3f5c589f84ae4889ad9f62be235535e8879f60a0cf69b080e8893c45276bde0909c88487639c92416ff50e488fc63c41ecc44c9ca88510963a87e68b0ce889e1c06117e4e497f8865f7e2a06e3ed91af84ae48880084671915dd4e7889f2a1934ec2fadd888a76b39f8088ed876884a429fee92d9036ce4888d3a1cb30019cdcb88bbe78cc87d3b40328888b853ef039b5c06883e3bee577df23038f84ae4882b6e9861ed8569718814aac9c7f7b28a5f884a56384f14ed924f880f790a0910842506e48813b5a7b7b7a91e36886f192c6e7587b0da887bf227c672cd2a2e880fc72c7d02a449d9e488103c529502ad089188cd100d7c4ad230568874b2c8d68f632e918803e05b3d836d4421f84ae488dd27ee63f971165188d26d7089322b6121882dd326273f44b550881f29d48600b3d10ae488b3805de591c673e888fb7d02cab08df34288e487b807a0e879d8885b83925ec10c5634f8e4f84ae48899665c3248be3c7688b79f73fbcc63d3c2882cf3843d05d4218d88351c593628bef299e48846cc0a85304a8579883bebb41672a424e9881f0af2f528601b86886f267abe31f645b1f84ae488b813380e0f13fb3a880ab2a621b6b19809880a15f02c84940f8688651ead80c9f049e5e48802bd98c88b2c84578842cf23a6e5a165a68882de831c9537e4038808bc67b22156bb56f84ae488ed28d9ee9db145fa880b63396eac07322988f9713369f94db3bb885028a7e09e0705b3e488049a9bf973f15ecd885de1b8c52708fcd78882546898b2ddc061881093929325dd684480f84fe4883eef399ea05850e988b370e64f3f0b3f0c8898f25ab3eba84a0a8804d8f90483e7eb67c480808080e488ce5d92bf1b79600388d39b2b123b1674d588b56ce1c84704eb3b8806ebaf6dba737f55edeca038a1503908fd00988afebe7e34bccbe2a4d6636549a9c0ce150db72d6c4af9018a40003782dace9d900000c0c0"
const block2 = "f908b7f908b2a0729356f61c03c0975c73bfe755c3e08070835577c79ffec0fe174c81ba2535b5a01dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d4934794a8ea391eacd86ab326843579060e42007a5fa93ba00f1423c831984377258792292e7253ffce9cc59850826795b2b80095e1dbdb23a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421b90100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008302000001832ffbd2808461af76c68d64616f2d686172642d666f726ba02a5fb584ff389ac0e29ca6ae5379ffeb7738898793d9d7db935d8e56139fee44880dfe34772ec56cc984342770c0b906a6f906a3f9053af904ebf90260f84ae488d8ac673ba009741788f25aba782a03468b8892c66f5858217273883b1e3da8790902a6e4886cc086f1a5621a2f885f26a17a4d08728b884861f50fd046396888662b5df79ed84a89f84ae4882943baa174454f8c88983d2180f4c022ea8821ab439faa5430dc880a58ab0d3c36083ee48851fca535ba70fc1688d92feb8f4b55f56a882801021e00d8acfe8868d7995b101b7fe2f84ae4883551c7c439b30676880f9fef473db97626885223153f416efb44882a3a24e39e50b784e488cf09e525eae587c4885f40a46e98fdae4588eee1afffdf981b1b8827eece819bafb96bf84ae48812bef71ce07c305a88a8d80dfc09f56ec4880cfb004913bda9e08823d42bf4fca9ff98e48896740863a0bec8e2884c640d8dc109ddcd880b4511227224424488231fecd6fdd0839cf84ae488bdb28c5edabca8cc882466c841433158e5887fcf9f9ad4110edf886fc701007bb836bfe48872bdceeddd04e361887b1be721b6ff1787880f4bfc08af7f0bd7880a5ab527a445857ef84ae48876e4fdcba07c94fe883b09d98d3b0b5862884d51954e90b1fca588432497b1f3f363ffe488a99b0f38f6106a708884aabf39e243a23188a6e57d19cc78b3f1883cf29d363837977ff84ae4883f5b9ebd6c19ab0388b0919c09b8eb523b8805f5d14e1a26816c88613881764f89212be4884bd085b8094e7c2a88caf4e263a135aeb588e6114a9f6c047e3688241b7680ae247e01f84ae48860c523f9eddc56e788cfbbc320fea94e708855325d08cd49b160884601192c0f4e8657e4889168120cb61ea93788a4ff3d1bde7ced9b88dec3b9f0198733e08823c104eebe638e1bf90260f84ae48852b1ebaa4da2ab29889c7e48ab1b0ef542886fca5139c33be13988583ed88183eb9dc8e488d6bf44087c5c04a28808f6393fce57952088485ccc7aadd18b07880341c4f977aac5edf84ae488569c64d50ad045168842eedf769c9235a788bf5446c21266091b88641d10f01c9056fde4882cea7fa4383bb13f881fd3cf301f173edd881d2505652d3c4d80882e151c4c7090c935f84ae488abc1c464a2d77a8388abffc7ab5c9105f988f143af249a2f20558863e1bf3efab63d6fe488190ea714d6a2f1068882e82735ad3fd79988346a17efad07cb748869ff8ab4edc66218f84ae48836d6a202536e23898813b949eacd2199e288ce9f49cb327265fc8814551ac897221894e48842f71755e301754f88b509353ff430b8b3887b36dbfea041d3cf883b610516d076df38f84ae48842afb439cc1defc788812b3c521924084988a2d5b207361d2cc68841f62a6285ee3b77e488d941683d11cb53af888e443e1f78d81fe28855969f63e13958de8810860c1925fcb3e7f84ae488e70201bf504d9100881c5a71fc60a424f488024d7c5574a4951a883b0442a35c3c7fa5e4884d803c4c9e330baf88b42db2bb50ca32ba88eeb7388e92de8058881fcafc4b160f2dcdf84ae4889660a21c029df450887c60516bb89d51d688da6da3cc73b2b9568819065e1034511f4fe488588173707d6912ed8820adad4de53665628890783191465fff5388502ab6f9d0ae8157f84ae488238e87b6733c39ea888d4dd53e466adf33889a226542aada262e886abb7738605f389ce488402050628b3b7ab588f9080b9cf0ddb2008887d628c23da7bb8f880c8622ea89277f9fe4889d54f3ceb1a1326a88b7a226e8606ce00f88724da61fa0c94f448818e4791fa71d42d5f84ae4886f77679b22743a6b88c9dfb2476119ecc78828c72d1f55573fe388489580e6ebce8fdde488bce930c845d82c8f88107d4edb0893025c8848fd9ffae0c01c74885d950ffef3292acef8e4f84ae4888087710ce4b977988817509b67a526d9428868f5aa7e5b99f288886a98f517c54f64afe488bffaf0480834326e8859e8316bf3065f5a8849f1221a2ca88bb38826041eef72526e27f84ae488f61b4c7bd174cad388ecef354c6bb33b1788378dcccdc1d02ac8885bf4fe1a4a474ebae488ff2ee0d4f45a0a6688f3f87c5df9ffa4d1880d36d0040778d2028839b87c1fdd593c4bf84ae48848a370c4952abf0d88ebc4578943f99e628803568593c55d51f8881f89d1f6e9e63a4ee488f1988ca231946e6a88fc325d0ebc5f391188252e8a63c45a5d25883786dbe85263109e80f84fe48803ec066575b070c78899ce0c705302fdc588ae3dfd9a2ec6895388053ebf348b34e04bc480808080e48871af21677898be8d889bfcf14f724ac50f881dec09da9d9dc428880d5bcfd0bf342876edeca038a1503908fd00988afebe7e34bccbe2a4d6636549a9c0ce150db72d6c4af9018a40001bc16d674ec80000c0c0"

const b1 = Buffer.from(block1, 'hex')
const b2 = Buffer.from(block2, 'hex')

const rlp1 = rlp.decode(b1) as any
const verkl1 = rlp1[0][16]
const rlp2 = rlp.decode(b2) as any
const verkle2 = rlp2[0][16]

//@ts-ignore
let res = wasm.js_verify_update(rlp1[0][3], verkl1, new Map())
console.log(res)
console.log(verkl1)
console.log(verkle2)


